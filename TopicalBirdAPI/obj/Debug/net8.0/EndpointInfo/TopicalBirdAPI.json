{
  "openapi": "3.0.1",
  "info": {
    "title": "Topicalbird API",
    "description": "Backend API for Topicalbird forums.",
    "version": "v1"
  },
  "paths": {
    "/api/Auth/register": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Register a new user",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "required": [
                  "Email",
                  "Handle",
                  "Password"
                ],
                "type": "object",
                "properties": {
                  "Email": {
                    "type": "string",
                    "description": "User email address",
                    "format": "email"
                  },
                  "Password": {
                    "type": "string",
                    "description": "Must be at least 8 char long and must consist of uppercase, lowercase, special and numerical char.",
                    "format": "password"
                  },
                  "Handle": {
                    "maxLength": 50,
                    "type": "string",
                    "description": "Username. Case is ignored."
                  },
                  "DisplayName": {
                    "maxLength": 100,
                    "type": "string",
                    "description": "Display name. Case is kept."
                  },
                  "Icon": {
                    "type": "string",
                    "description": "Avatar image. Allowed types: .JPG, .PNG, .WEBP, .GIF. Maximum 5MB.",
                    "format": "binary"
                  }
                }
              },
              "encoding": {
                "Email": {
                  "style": "form"
                },
                "Password": {
                  "style": "form"
                },
                "Handle": {
                  "style": "form"
                },
                "DisplayName": {
                  "style": "form"
                },
                "Icon": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "409": {
            "description": "Conflict",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ConflictResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseSuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Auth/login": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Login existing user",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserLoginRequest"
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Auth/logout": {
      "post": {
        "tags": [
          "Auth"
        ],
        "summary": "Logout current user",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Auth/password": {
      "patch": {
        "tags": [
          "Auth"
        ],
        "summary": "Change password",
        "description": "This endpoint requires authentication.",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              }
            }
          }
        },
        "responses": {
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Comments/get/{postId}": {
      "get": {
        "tags": [
          "Comments"
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Comments/add/{postId}": {
      "post": {
        "tags": [
          "Comments"
        ],
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "required": [
                  "Content"
                ],
                "type": "object",
                "properties": {
                  "PostId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "Content": {
                    "maxLength": 10000,
                    "minLength": 1,
                    "type": "string"
                  }
                }
              },
              "encoding": {
                "PostId": {
                  "style": "form"
                },
                "Content": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Comments/edit/{commentId}": {
      "put": {
        "tags": [
          "Comments"
        ],
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "required": [
                  "Content"
                ],
                "type": "object",
                "properties": {
                  "PostId": {
                    "type": "string",
                    "format": "uuid"
                  },
                  "Content": {
                    "maxLength": 10000,
                    "minLength": 1,
                    "type": "string"
                  }
                }
              },
              "encoding": {
                "PostId": {
                  "style": "form"
                },
                "Content": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Comments/remove/{commentId}": {
      "delete": {
        "tags": [
          "Comments"
        ],
        "parameters": [
          {
            "name": "commentId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Nest/search/{query}": {
      "get": {
        "tags": [
          "Nest"
        ],
        "summary": "Search a nest",
        "parameters": [
          {
            "name": "query",
            "in": "path",
            "description": "Text to search",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageNo",
            "in": "query",
            "description": "Page no. to get",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of results to get",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Nest": {
      "get": {
        "tags": [
          "Nest"
        ],
        "summary": "Get all nests",
        "parameters": [
          {
            "name": "pageNo",
            "in": "query",
            "description": "Search page number",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of results to return",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Nest/me": {
      "get": {
        "tags": [
          "Nest"
        ],
        "summary": "Get nests moderated by authenticated user",
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Nest/{id}": {
      "get": {
        "tags": [
          "Nest"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      },
      "put": {
        "tags": [
          "Nest"
        ],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "Description": {
                    "maxLength": 500,
                    "type": "string"
                  },
                  "DisplayName": {
                    "maxLength": 50,
                    "type": "string"
                  },
                  "Icon": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              },
              "encoding": {
                "Description": {
                  "style": "form"
                },
                "DisplayName": {
                  "style": "form"
                },
                "Icon": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Nest/title/{title}": {
      "get": {
        "tags": [
          "Nest"
        ],
        "parameters": [
          {
            "name": "title",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Nest/new": {
      "post": {
        "tags": [
          "Nest"
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "required": [
                  "Title"
                ],
                "type": "object",
                "properties": {
                  "Title": {
                    "type": "string"
                  },
                  "Description": {
                    "maxLength": 500,
                    "type": "string"
                  },
                  "DisplayName": {
                    "maxLength": 50,
                    "type": "string"
                  },
                  "Icon": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              },
              "encoding": {
                "Title": {
                  "style": "form"
                },
                "Description": {
                  "style": "form"
                },
                "DisplayName": {
                  "style": "form"
                },
                "Icon": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK"
          }
        }
      }
    },
    "/api/Posts/new": {
      "post": {
        "tags": [
          "Posts"
        ],
        "summary": "Creates a new post for an authenticated user in a specified Nest (community).",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "required": [
                  "Content",
                  "NestTitle",
                  "Title"
                ],
                "type": "object",
                "properties": {
                  "Title": {
                    "maxLength": 200,
                    "type": "string"
                  },
                  "Content": {
                    "type": "string"
                  },
                  "NestTitle": {
                    "type": "string"
                  },
                  "Images": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    }
                  },
                  "Alts": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  }
                }
              },
              "encoding": {
                "Title": {
                  "style": "form"
                },
                "Content": {
                  "style": "form"
                },
                "NestTitle": {
                  "style": "form"
                },
                "Images": {
                  "style": "form"
                },
                "Alts": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Returns the newly created post.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "If the model state is invalid or if media processing fails.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "If the user is not authenticated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "If the specified Nest (community) is not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "If an unexpected server error occurs.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/{postId}": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Retrieves a single post by its unique ID.",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "description": "The unique identifier (GUID) of the post.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the requested post.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "If the post is not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/nest": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Gets a paged list of posts belonging to a specific Nest (community).",
        "parameters": [
          {
            "name": "nestTitle",
            "in": "query",
            "description": "The title of the Nest where posts will be fetched.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageNo",
            "in": "query",
            "description": "Page number to fetch. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of posts that will be returned per page. Maximum is 50. Defaults to 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the paged list of posts.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/user/id/{userId}": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Gets a paged list of posts created by a specific user via their ID.",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "The unique identifier (GUID) of the user.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          },
          {
            "name": "pageNo",
            "in": "query",
            "description": "Page number to fetch. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of posts that will be returned per page. Maximum is 50. Defaults to 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the paged list of posts.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/user/username": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Gets a paged list of posts created by a specific user via their username/handle.",
        "parameters": [
          {
            "name": "userHandle",
            "in": "query",
            "description": "The username or handle of the user.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageNo",
            "in": "query",
            "description": "Page number to fetch. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of posts that will be returned per page. Maximum is 50. Defaults to 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the paged list of posts.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/latest": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Gets latest posts, optionally filtered by a specific Nest.",
        "parameters": [
          {
            "name": "nest",
            "in": "query",
            "description": "Title of the Nest where posts will be fetched. Optional.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageNo",
            "in": "query",
            "description": "Page number to fetch. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of posts that will be returned per page. Maximum is 50. Defaults to 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the paged list of posts.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/popular": {
      "get": {
        "tags": [
          "Posts"
        ],
        "summary": "Gets popular posts, sorted by total votes and optionally filtered by a specific Nest.",
        "parameters": [
          {
            "name": "nest",
            "in": "query",
            "description": "Title of the Nest (community) where posts will be fetched. Optional.",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "pageNo",
            "in": "query",
            "description": "Page number to fetch. Defaults to 1.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 1
            }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "Amount of posts that will be returned per page. Maximum is 50. Defaults to 20.",
            "schema": {
              "type": "integer",
              "format": "int32",
              "default": 20
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the paged list of posts.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ObjectSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/update/{postId}": {
      "patch": {
        "tags": [
          "Posts"
        ],
        "summary": "Updates the content of an existing post. Only the author can update a post.",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "description": "The unique identifier (GUID) of the post to update.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "Content": {
                    "maxLength": 10000,
                    "type": "string"
                  }
                }
              },
              "encoding": {
                "Content": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "If the post was successfully updated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PostResponseSuccessResponse"
                }
              }
            }
          },
          "204": {
            "description": "If the post content was the same and no update was performed."
          },
          "400": {
            "description": "If the model state is invalid.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "If the user is not authenticated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "If the authenticated user is not the author of the post.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "If the post is not found.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Posts/delete/{postId}": {
      "delete": {
        "tags": [
          "Posts"
        ],
        "summary": "Deletes a post by its ID. Only the author or an Admin can delete a post.",
        "parameters": [
          {
            "name": "postId",
            "in": "path",
            "description": "The unique identifier (GUID) of the post to delete.",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "If the post was successfully deleted.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          },
          "204": {
            "description": "If the post was not found (idempotent delete)."
          },
          "401": {
            "description": "If the user is not authenticated.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "If the authenticated user is not the author or an Admin.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "If a file cleanup or other server error occurs.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Gets all users",
        "description": "Admin only endpoint.",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseListSuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/me": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get authenticated user",
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseSuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/get/id/{id}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user by ID",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of user",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseSuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/get/email/{email}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user by Email",
        "description": "Admin only endpoint.",
        "parameters": [
          {
            "name": "email",
            "in": "path",
            "description": "Email address of user",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseSuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/get/username/{username}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Get user by username",
        "parameters": [
          {
            "name": "username",
            "in": "path",
            "description": "Username/Handle of user",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseSuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/search": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Search for users",
        "description": "Requires authentication.\r\n\r\nMatches query with Handle or DisplayName.",
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "description": "Text to search",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseListSuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/update/{id}": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Updates user details",
        "description": "DisplayName and Icon (Avatar)",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of user",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "DisplayName": {
                    "type": "string",
                    "description": "The new public display name for the user.",
                    "example": "Shruti Thakur"
                  },
                  "Icon": {
                    "type": "string",
                    "description": "The new profile image file for the user. Maximum 5MB. Only images and GIFs allowed.",
                    "format": "binary",
                    "example": "photo.png"
                  }
                }
              },
              "encoding": {
                "DisplayName": {
                  "style": "form"
                },
                "Icon": {
                  "style": "form"
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserResponseSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/ban/{id}": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Bans a user",
        "description": "Admin only endpoint.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of user getting banned",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/unban/{id}": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Unbans a user",
        "description": "Admin only endpoint.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of user getting unbanned",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/Users/promote/{id}": {
      "patch": {
        "tags": [
          "Users"
        ],
        "summary": "Promotes to an admin",
        "description": "Admin only endpoint.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id of user getting promoted",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/StringSuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "Forbidden",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "Not Found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "ChangePasswordRequest": {
        "required": [
          "confirmNewPassword",
          "newPassword",
          "oldPassword"
        ],
        "type": "object",
        "properties": {
          "oldPassword": {
            "minLength": 1,
            "type": "string",
            "description": "The user's current password. This is required for security verification.",
            "format": "password",
            "example": "P@sswOrd123"
          },
          "newPassword": {
            "minLength": 1,
            "type": "string",
            "description": "The desired new password for the user's account.",
            "format": "password",
            "example": "NewP@ssw0rd456"
          },
          "confirmNewPassword": {
            "minLength": 1,
            "type": "string",
            "description": "A confirmation of the new password, which must match the value in the TopicalBirdAPI.Data.DTO.AuthDTO.ChangePasswordRequest.NewPassword field.",
            "format": "password",
            "example": "NewP@ssw0rd456"
          }
        },
        "additionalProperties": false,
        "description": "Data Transfer Object (DTO) used for requesting a password change."
      },
      "ConflictResponse": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "description": "The fully qualified type name of the variable or resource that is in conflict.",
            "nullable": true,
            "example": "System.String"
          },
          "variable": {
            "type": "string",
            "description": "The name of the variable, parameter, or property that caused the conflict.",
            "nullable": true,
            "example": "Username"
          },
          "message": {
            "type": "string",
            "description": "A descriptive message detailing what may have caused the conflict.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents an API response structure used to indicate a 409 Conflict error.\r\nIt provides details about the resource or variable that caused the conflict."
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "A brief, high-level summary of the error.",
            "nullable": true,
            "example": "Validation Failed"
          },
          "description": {
            "type": "string",
            "description": "General description or additional details for the error.",
            "nullable": true
          },
          "errors": {
            "type": "object",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "description": "Dictionary of field-specific errors, typically used for **400 Bad Request** (Validation).\r\nKey is the field name, Value is an array of error messages.",
            "nullable": true
          },
          "referenceCode": {
            "type": "string",
            "description": "A unique identifier generated by the server for internal logging and traceability. \r\nThis code can be provided to support for quicker issue resolution.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Standardized response object for all API error statuses.\r\nThis structure is used for consistent error reporting across the application."
      },
      "MediaResponse": {
        "type": "object",
        "properties": {
          "url": {
            "type": "string",
            "nullable": true
          },
          "alt": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "NestResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "icon": {
            "type": "string",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "moderator": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "additionalProperties": false
      },
      "ObjectSuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "A descriptive message about the success of the operation.",
            "nullable": true,
            "example": "Operation completed successfully."
          },
          "content": {
            "description": "The payload or data content returned by the successful operation. This can be null.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a successful API response, optionally containing data of a specified type.\r\nThis structure is commonly used for consistent response formatting."
      },
      "PostResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "title": {
            "type": "string",
            "nullable": true
          },
          "content": {
            "type": "string",
            "nullable": true
          },
          "author": {
            "$ref": "#/components/schemas/UserResponse"
          },
          "nest": {
            "$ref": "#/components/schemas/NestResponse"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "photos": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MediaResponse"
            },
            "nullable": true
          },
          "votes": {
            "type": "integer",
            "format": "int32"
          },
          "comments": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "PostResponseSuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "A descriptive message about the success of the operation.",
            "nullable": true,
            "example": "Operation completed successfully."
          },
          "content": {
            "$ref": "#/components/schemas/PostResponse"
          }
        },
        "additionalProperties": false,
        "description": "Represents a successful API response, optionally containing data of a specified type.\r\nThis structure is commonly used for consistent response formatting."
      },
      "StringSuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "A descriptive message about the success of the operation.",
            "nullable": true,
            "example": "Operation completed successfully."
          },
          "content": {
            "type": "string",
            "description": "The payload or data content returned by the successful operation. This can be null.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a successful API response, optionally containing data of a specified type.\r\nThis structure is commonly used for consistent response formatting."
      },
      "UserLoginRequest": {
        "required": [
          "email",
          "password"
        ],
        "type": "object",
        "properties": {
          "email": {
            "minLength": 1,
            "type": "string",
            "description": "The email address of the user. This is used as the primary identifier for login.",
            "format": "email",
            "example": "user.name@example.com"
          },
          "password": {
            "minLength": 1,
            "type": "string",
            "description": "The user's password.",
            "format": "password",
            "example": "P@sswOrd123"
          },
          "rememberMe": {
            "type": "boolean",
            "description": "A flag indicating whether the system should remember the user's login session. Defaults to false.",
            "example": true
          }
        },
        "additionalProperties": false,
        "description": "Data Transfer Object (DTO) used to submit user credentials for login authentication."
      },
      "UserResponse": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid"
          },
          "displayName": {
            "type": "string",
            "nullable": true
          },
          "handle": {
            "type": "string",
            "nullable": true
          },
          "icon": {
            "type": "string",
            "nullable": true
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "isAdmin": {
            "type": "boolean"
          },
          "isBanned": {
            "type": "boolean"
          }
        },
        "additionalProperties": false
      },
      "UserResponseListSuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "A descriptive message about the success of the operation.",
            "nullable": true,
            "example": "Operation completed successfully."
          },
          "content": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/UserResponse"
            },
            "description": "The payload or data content returned by the successful operation. This can be null.",
            "nullable": true
          }
        },
        "additionalProperties": false,
        "description": "Represents a successful API response, optionally containing data of a specified type.\r\nThis structure is commonly used for consistent response formatting."
      },
      "UserResponseSuccessResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "description": "A descriptive message about the success of the operation.",
            "nullable": true,
            "example": "Operation completed successfully."
          },
          "content": {
            "$ref": "#/components/schemas/UserResponse"
          }
        },
        "additionalProperties": false,
        "description": "Represents a successful API response, optionally containing data of a specified type.\r\nThis structure is commonly used for consistent response formatting."
      }
    }
  }
}